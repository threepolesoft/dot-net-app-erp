@inject IJSRuntime JS
@inject NavigationManager NavManager

<div id="progress-bar" style="position: fixed;
    top: 0;
    left: 0;
    width: 0%;
    height: 4px;
    background: #007bff;
    z-index: 9999;
    transition: width 0.3s ease-out;
    display: none;"></div>

@code {
    protected override async Task OnInitializedAsync()
    {
        NavManager.LocationChanged += OnLocationChanged;
    }

    private async void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        await JS.InvokeVoidAsync("progressBar.start");
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await JS.InvokeVoidAsync("progressBar.complete");
    }

    public void Dispose()
    {
        NavManager.LocationChanged -= OnLocationChanged;
    }
}
